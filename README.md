# ragp
Model Documentation: Biophysical Modelling of Neuronal Phenotypes of the Right Atrial Ganglionic Plexus from Single Neuron Transcriptomics

Context of use: Simulation of single compartment neuron electrical activity in the RAGP.

Instructions for reproducing figures using data generated by models:
I.	Figure 3
  a.	Clone GitHub repository and checkout to tag-v2.0.1
git clone https://github.com/suny-downstate-medical-center/ragp.git
  b.	Run Tdata_plots.py, which reads the data from tdata_all_15.csv
II.	Figure 4
  a.	Download scAnalysis.py and data files 22aug25b_allData.json and 22aug25d_allData.json
  b.	To produce Figure 5 A and B, uncomment lines 447-451
  c.	To produce Figure 5D, uncomment line 455
  d.	To produce Figure 5C, uncomment lines 459-461
  e.	Note that a large amount of RAM is required to run this file and Figure 5C may need to be produced separately from Figure 5 A, B, D
III.	Figure 5
  a.	Download classification.json and classification_firing_sequence.py
  b.	Run classification_firing_sequence.py to produce Figure 5A-E
  c.	Note that a large amount of RAM is required to run this file 

Instructions for running the models: 
Detailed instructions for running the model in NetPyNE and on the O2S2PARC platform are as follows:

I. NetPyNE implementation
1.	Open a new Terminal window
2.	Make a new directory into which to clone the repository
3.	Clone GitHub repository and checkout to tag-v2.0.1
git clone https://github.com/suny-downstate-medical-center/ragp.git
4.	Install NEURON and NetPyNE: 
pip3 install NEURON / pip install NEURON
pip3 install netpyne / pip3 install netpyne
5.	Compile mod files: 
nrnivmodl mod
6.	On successful compilation, x86_64 folder is created
7.	In order to run a single simulation, execute the following command:
nrniv -python init.py
8.	In order to run a batch simulation, MPI installation is mandatory: 
mpiexec --oversubscribe -np 32 nrniv -python -mpi batch.py
  a.	Once the simulations are complete, run scAnalysis.py
ipython -i scAnalysis.py
  b.	Create _allData.json file by running the function 
readBatchData(dataFolder, batchLabel, paramFile = 'params.csv')
  c.	Load the _allData.json file by running the function 
readAllData(jsonfilename)
  d.	Analyse the data in _allData.json using the functions in scAnalysis.py
9.	In order to run sobol sampling on the parameter space, execute sobol.py, following which a csv file (default name: params.csv) is generated that will contain the parameter values
10.	In order to plot the binarized transcriptomics data, execute 
ipython Tdata_plots.py

II. O2S2PARC implementation:  
1.	Login to https://osparc.io/
2.	Use the Jupyter Octave+Python Math service from the Dashboard
3.	Clone the repository from GitHub: https://github.com/suny-downstate-medical-center/ragp.git
4.	Launch Terminal
5.	Type the following commands on the Terminal
  a.	cd work/ragp
  b.	pip install --quiet NEURON
  c.	pip install --quiet netpyne
6.	Resume the steps from I.5. 
